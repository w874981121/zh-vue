{"remainingRequest":"/Users/wangyanqi/project/zh-vue/node_modules/thread-loader/dist/cjs.js!/Users/wangyanqi/project/zh-vue/node_modules/babel-loader/lib/index.js!/Users/wangyanqi/project/zh-vue/node_modules/eslint-loader/index.js??ref--13-0!/Users/wangyanqi/project/zh-vue/src/js/barrage/animate.js","dependencies":[{"path":"/Users/wangyanqi/project/zh-vue/src/js/barrage/animate.js","mtime":1575386448874},{"path":"/Users/wangyanqi/project/zh-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangyanqi/project/zh-vue/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangyanqi/project/zh-vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/wangyanqi/project/zh-vue/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly/nlKjkuo7orrDlvZXkuIrmrKFwb3PnmoTkuLTml7blj5jph48KdmFyIHRhcmdldF9wb2ludF94ID0gbnVsbCwKICAgIHRhcmdldF9wb2ludF95ID0gbnVsbDsKCnZhciBtb3ZlID0gZnVuY3Rpb24gKCkgewogIC8qKg0KICAgKiDliqjnlLvpgLvovpENCiAgICogQHBhcmFtICB75Yqo55S755uu5qCHfSB0YXJnZXQgICAgICAgZG9t6IqC54K5DQogICAqIEBwYXJhbSAge+aWueWQkX0gZGlyZWN0aW9uICAgIGxlZnQgdG9wIGJvdHRvbSByaWdodA0KICAgKiBAcGFyYW0gIHvnm67moIflt6jpub99IGFpbV9kaXN0YW5jZSDmlbDlrZfnsbvlnosNCiAgICogQHBhcmFtICB76YCf5bqmfSBzcGVlZCAgICAgICAgaW50DQogICAqIEByZXR1cm4ge+W8gOWni+aJp+ihjOeahOWHveaVsH0gICAgICAgICAgICAgIOWHveaVsOexu+Weiw0KICAgKi8KICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwgZGlyZWN0aW9uLCBhaW1fZGlzdGFuY2UsIHNwZWVkKSB7CiAgICBzcGVlZCA9IHR5cGVvZiBzcGVlZCA9PT0gIm51bWJlciIgPyBzcGVlZCA6IDU7CiAgICB2YXIgdGVtcF90YXJnZXRfcG9pbnQ7CiAgICBkaXJlY3Rpb24gPT09ICJsZWZ0IiAmJiAodGVtcF90YXJnZXRfcG9pbnQgPSB0YXJnZXRfcG9pbnRfeCA9IHRhcmdldF9wb2ludF94ICE9PSBudWxsID8gdGFyZ2V0X3BvaW50X3ggLSBhaW1fZGlzdGFuY2UgOiB0YXJnZXQub2Zmc2V0TGVmdCAtIGFpbV9kaXN0YW5jZSk7CiAgICBkaXJlY3Rpb24gPT09ICJyaWdodCIgJiYgKHRlbXBfdGFyZ2V0X3BvaW50ID0gdGFyZ2V0X3BvaW50X3ggPSB0YXJnZXRfcG9pbnRfeCAhPT0gbnVsbCA/IHRhcmdldF9wb2ludF94ICsgYWltX2Rpc3RhbmNlIDogdGFyZ2V0Lm9mZnNldExlZnQgKyBhaW1fZGlzdGFuY2UpOwogICAgZGlyZWN0aW9uID09PSAidG9wIiAmJiAodGVtcF90YXJnZXRfcG9pbnQgPSB0YXJnZXRfcG9pbnRfeSA9IHRhcmdldF9wb2ludF95ICE9PSBudWxsID8gdGFyZ2V0X3BvaW50X3kgLSBhaW1fZGlzdGFuY2UgOiB0YXJnZXQub2Zmc2V0VG9wIC0gYWltX2Rpc3RhbmNlKTsKICAgIGRpcmVjdGlvbiA9PT0gImJvdHRvbSIgJiYgKHRlbXBfdGFyZ2V0X3BvaW50ID0gdGFyZ2V0X3BvaW50X3kgPSB0YXJnZXRfcG9pbnRfeSAhPT0gbnVsbCA/IHRhcmdldF9wb2ludF95ICsgYWltX2Rpc3RhbmNlIDogdGFyZ2V0Lm9mZnNldFRvcCArIGFpbV9kaXN0YW5jZSk7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICBpZiAoZGlyZWN0aW9uID09PSAibGVmdCIpIHsKICAgICAgICB0YXJnZXQub2Zmc2V0TGVmdCA+IHRlbXBfdGFyZ2V0X3BvaW50ID8gdGFyZ2V0LnN0eWxlLmxlZnQgPSB0YXJnZXQub2Zmc2V0TGVmdCAtIHNwZWVkICsgInB4IiA6IHRhcmdldC5zdHlsZS5sZWZ0ID0gdGVtcF90YXJnZXRfcG9pbnQgKyAicHgiOwogICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gInJpZ2h0IikgewogICAgICAgIHRhcmdldC5vZmZzZXRMZWZ0IDwgdGVtcF90YXJnZXRfcG9pbnQgPyB0YXJnZXQuc3R5bGUubGVmdCA9IHRhcmdldC5vZmZzZXRMZWZ0ICsgc3BlZWQgKyAicHgiIDogdGFyZ2V0LnN0eWxlLmxlZnQgPSB0ZW1wX3RhcmdldF9wb2ludCArICJweCI7CiAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSAidG9wIikgewogICAgICAgIHRhcmdldC5vZmZzZXRUb3AgPiB0ZW1wX3RhcmdldF9wb2ludCA/IHRhcmdldC5zdHlsZS50b3AgPSB0YXJnZXQub2Zmc2V0VG9wIC0gc3BlZWQgKyAicHgiIDogdGFyZ2V0LnN0eWxlLnRvcCA9IHRlbXBfdGFyZ2V0X3BvaW50ICsgInB4IjsKICAgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT09ICJib3R0b20iKSB7CiAgICAgICAgdGFyZ2V0Lm9mZnNldFRvcCA8IHRlbXBfdGFyZ2V0X3BvaW50ID8gdGFyZ2V0LnN0eWxlLnRvcCA9IHRhcmdldC5vZmZzZXRUb3AgKyBzcGVlZCArICJweCIgOiB0YXJnZXQuc3R5bGUudG9wID0gdGVtcF90YXJnZXRfcG9pbnQgKyAicHgiOwogICAgICB9CgogICAgICByZXR1cm4gdGVtcF90YXJnZXRfcG9pbnQ7CiAgICB9OwogIH07Cn0oKTsKLyoqDQogKiDkuIrkuIvlt6blj7PliqjnlLvlsI/mj5Lku7YNCiAqIEBwYXJhbSAge+imgeaJp+ihjOWKqOeUu+eahOebruagh30gICB0YXJnZXQgICAgICAgZG9t6IqC54K5DQogKiBAcGFyYW0gIHvmlrnlkJF9ICAgZGlyZWN0aW9uICAgIGxlZnQscmlnaHQsdG9wLGJvdHRvbQ0KICogQHBhcmFtICB76KaB56e75Yqo55qE6Led56a7fSAgIGFpbV9kaXN0YW5jZSAg5pWw5a2X57G75Z6LDQogKiBAcGFyYW0gIHvpgJ/luqZ9ICAgc3BlZWQgICAgICAgIOaVsOWtl+exu+Weiw0KICogQHBhcmFtICB75Zue6LCD5Ye95pWwfSBjYiAgICAgICAgICAg5Ye95pWwDQogKiBAcmV0dXJuIHtmbn0gICAgICAgICAgICAgICAg55yf5q2j55qE5Yqo55S76LCD55So6ICFDQogKi8KCgpmdW5jdGlvbiBhbmltYXRpb24odGFyZ2V0LCBkaXJlY3Rpb24sIGFpbV9kaXN0YW5jZSwgc3BlZWQpIHsKICB2YXIgY2IgPSBhcmd1bWVudHMubGVuZ3RoID4gNCAmJiBhcmd1bWVudHNbNF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s0XSA6IGZ1bmN0aW9uICgpIHsKICAgIGNvbnNvbGUubG9nKCJjYWxsYmFjayBjYWxsZWQiKTsKICB9OwogIGNiID0gdHlwZW9mIHNwZWVkID09PSAiZnVuY3Rpb24iID8gc3BlZWQgOiBjYjsKICB2YXIgcXVldWVPYmogPSBbXTsgLy/osIPnlKjmlrDnmoRhbmltYXRpb27nmoTml7blgJnvvIzph43nva7kuIDkuIvvvIzkuI3nhLbmr4/mrKHpg73mmK/lj6DliqDnmoQKCiAgdGFyZ2V0X3BvaW50X3ggPSBudWxsLCB0YXJnZXRfcG9pbnRfeSA9IG51bGw7CgogIHF1ZXVlT2JqLm5leHQgPSBmdW5jdGlvbiAobl9kaXIsIHF1ZXVlX3gsIHNwZWVkKSB7CiAgICB0aGlzLnB1c2goewogICAgICBmbjogbW92ZSh0YXJnZXQsIG5fZGlyLCBxdWV1ZV94LCBzcGVlZCksCiAgICAgIGRpcjogbl9kaXIsCiAgICAgIGxhc3RfeDogcXVldWVfeAogICAgfSk7CiAgICByZXR1cm4gcXVldWVPYmo7CiAgfTsKCiAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgIC8qKg0KICAgICAqIOecn+ato+aJp+ihjOWKqOeUu+eahA0KICAgICAqIEBwYXJhbSAge+WIpOaWreaXtuWAmee7k+adn+eahOadoeS7tn0gYW5pICAgICAgZm4NCiAgICAgKiBAcGFyYW0gIHvmlrnlkJF9IHJlYWxfZGlyIGxlZnQgdG9wIGJvdHRvbSAgcmlnaHQNCiAgICAgKiBAcmV0dXJuIHvliqjnlLvpmJ/liJfmlbDnu4R9ICAgICAgICAgIOeUqOS6juS+neasoeW8gOWQr+WKqOeUu+eahOmYn+WIl+aVsOe7hA0KICAgICAqLwogICAgZnVuY3Rpb24gcmVhbChhbmksIHJlYWxfZGlyKSB7CiAgICAgIHZhciB0ZW1wID0gYW5pLAogICAgICAgICAgdGVtcEFycjsKCiAgICAgIGZ1bmN0aW9uIGZuKCkgewogICAgICAgIGlmIChyZWFsX2RpciA9PT0gImxlZnQiIHx8IHJlYWxfZGlyID09PSAicmlnaHQiKSB7CiAgICAgICAgICBpZiAodGFyZ2V0Lm9mZnNldExlZnQgIT09IHRlbXAoKSkgewogICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZm4pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcXVldWVPYmpbMF0gJiYgKHRlbXBBcnIgPSBxdWV1ZU9iai5zaGlmdCgpKTsKICAgICAgICAgICAgdGVtcEFyciB8fCBjYigpOwogICAgICAgICAgICB0ZW1wQXJyICYmIHJlYWwodGVtcEFyci5mbiwgdGVtcEFyci5kaXIpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAocmVhbF9kaXIgPT09ICJ0b3AiIHx8IHJlYWxfZGlyID09PSAiYm90dG9tIikgewogICAgICAgICAgaWYgKHRhcmdldC5vZmZzZXRUb3AgIT09IHRlbXAoKSkgewogICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZm4pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcXVldWVPYmpbMF0gJiYgKHRlbXBBcnIgPSBxdWV1ZU9iai5zaGlmdCgpKTsKICAgICAgICAgICAgdGVtcEFyciB8fCBjYigpOwogICAgICAgICAgICB0ZW1wQXJyICYmIHJlYWwodGVtcEFyci5mbiwgdGVtcEFyci5kaXIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZuKTsKICAgIH0KCiAgICByZWFsKG1vdmUodGFyZ2V0LCBkaXJlY3Rpb24sIGFpbV9kaXN0YW5jZSwgc3BlZWQpLCBkaXJlY3Rpb24pOwogICAgcmV0dXJuIHF1ZXVlT2JqOwogIH0oKTsKfQoKbW9kdWxlLmV4cG9ydHMgPSBhbmltYXRpb247"},{"version":3,"sources":["/Users/wangyanqi/project/zh-vue/src/js/barrage/animate.js"],"names":["target_point_x","target_point_y","move","target","direction","aim_distance","speed","temp_target_point","offsetLeft","offsetTop","style","left","top","animation","cb","console","log","queueObj","next","n_dir","queue_x","push","fn","dir","last_x","real","ani","real_dir","temp","tempArr","requestAnimationFrame","shift","module","exports"],"mappings":"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","sourcesContent":["//用于记录上次pos的临时变量\r\nvar target_point_x = null,\r\ntarget_point_y = null;\r\n\r\nvar move = (function() {\r\n\t/**\r\n\t * 动画逻辑\r\n\t * @param  {动画目标} target       dom节点\r\n\t * @param  {方向} direction    left top bottom right\r\n\t * @param  {目标巨鹿} aim_distance 数字类型\r\n\t * @param  {速度} speed        int\r\n\t * @return {开始执行的函数}              函数类型\r\n\t */\r\n\treturn function(target, direction, aim_distance, speed) {\r\n\t\tspeed = typeof speed === \"number\" ? speed : 5;\r\n\t\tvar temp_target_point;\r\n\t\tdirection === \"left\" && (temp_target_point = target_point_x = target_point_x !== null ? target_point_x - aim_distance : target.offsetLeft - aim_distance);\r\n\t\tdirection === \"right\" && (temp_target_point = target_point_x = target_point_x !== null ? target_point_x + aim_distance : target.offsetLeft + aim_distance);\r\n\t\tdirection === \"top\" && (temp_target_point = target_point_y = target_point_y !== null ? target_point_y - aim_distance : target.offsetTop - aim_distance);\r\n\t\tdirection === \"bottom\" && (temp_target_point = target_point_y = target_point_y !== null ? target_point_y + aim_distance : target.offsetTop + aim_distance);\r\n\t\treturn function() {\r\n\t\t\tif (direction === \"left\") {\r\n\t\t\t\t(target.offsetLeft > temp_target_point) ? (target.style.left = target.offsetLeft - speed + \"px\") : (target.style.left = temp_target_point + \"px\");\r\n\t\t\t} else if (direction === \"right\") {\r\n\t\t\t\t(target.offsetLeft < temp_target_point) ? (target.style.left = target.offsetLeft + speed + \"px\") : (target.style.left = temp_target_point + \"px\");\r\n\t\t\t} else if (direction === \"top\") {\r\n\t\t\t\t(target.offsetTop > temp_target_point) ? (target.style.top = target.offsetTop - speed + \"px\") : (target.style.top = temp_target_point + \"px\");\r\n\t\t\t} else if (direction === \"bottom\") {\r\n\t\t\t\t(target.offsetTop < temp_target_point) ? (target.style.top = target.offsetTop + speed + \"px\") : (target.style.top = temp_target_point + \"px\");\r\n\t\t\t}\r\n\t\t\treturn temp_target_point;\r\n\t\t}\r\n\t}\r\n})();\r\n\r\n/**\r\n * 上下左右动画小插件\r\n * @param  {要执行动画的目标}   target       dom节点\r\n * @param  {方向}   direction    left,right,top,bottom\r\n * @param  {要移动的距离}   aim_distance  数字类型\r\n * @param  {速度}   speed        数字类型\r\n * @param  {回调函数} cb           函数\r\n * @return {fn}                真正的动画调用者\r\n */\r\nfunction animation(target, direction, aim_distance, speed, cb = function() {console.log(\"callback called\");} ) {\r\n\tcb = typeof speed === \"function\" ? speed : cb;\r\n\tvar queueObj = [];\r\n\t//调用新的animation的时候，重置一下，不然每次都是叠加的\r\n\ttarget_point_x = null,\r\n\ttarget_point_y = null;\r\n\tqueueObj.next = function(n_dir, queue_x, speed) {\r\n\t\tthis.push({\r\n\t\t\tfn: move(target, n_dir, queue_x, speed),\r\n\t\t\tdir: n_dir,\r\n\t\t\tlast_x: queue_x\r\n\t\t});\r\n\t\treturn queueObj;\r\n\t}\r\n\treturn (function() {\r\n\t\t/**\r\n\t\t * 真正执行动画的\r\n\t\t * @param  {判断时候结束的条件} ani      fn\r\n\t\t * @param  {方向} real_dir left top bottom  right\r\n\t\t * @return {动画队列数组}          用于依次开启动画的队列数组\r\n\t\t */\r\n\t\tfunction real(ani, real_dir) {\r\n\t\t\tvar temp = ani,\r\n\t\t\ttempArr;\r\n\r\n\t\t\tfunction fn() {\r\n\t\t\t\tif (real_dir === \"left\" || real_dir === \"right\") {\r\n\t\t\t\t\tif (target.offsetLeft !== temp()) {\r\n\t\t\t\t\t\trequestAnimationFrame(fn);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tqueueObj[0] && (tempArr = queueObj.shift());\r\n\t\t\t\t\t\ttempArr || cb();\r\n\t\t\t\t\t\ttempArr && real(tempArr.fn,  tempArr.dir);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (real_dir === \"top\" || real_dir === \"bottom\") {\r\n\t\t\t\t\tif (target.offsetTop !== temp()) {\r\n\t\t\t\t\t\trequestAnimationFrame(fn);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tqueueObj[0] && (tempArr = queueObj.shift());\r\n\t\t\t\t\t\ttempArr || cb();\r\n\t\t\t\t\t\ttempArr && real(tempArr.fn,  tempArr.dir);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\trequestAnimationFrame(fn);\r\n\t\t}\r\n\t\treal(move(target, direction, aim_distance, speed),  direction);\r\n\t\treturn queueObj;\r\n\t})();\r\n}\r\nmodule.exports = animation;\r\n"]}]}